function renderSearchWorks(){$("#title").val(searchWorksJson.title);var r=$("#works-template .works").clone(!1,!1);r.empty(),$("#result-works").empty().append(r),searchWorksJson.data.searchWorks.nodes.forEach(function(e){var a=$("#works-template .work-heading").clone(!0,!0);a.removeData().attr("data-id",e.id).attr("data-annict-id",e.annictId);var s="https://annict.jp/works/"+e.annictId;a.find(".work-link").attr("href",s).text(e.title),a.find(".work-status").val(e.viewerStatusState),r.append(a)}),searchWorksJson.data.searchWorks.pageInfo.hasPreviousPage?($("#pager-prev").show(),$("#pager-prev-disabled").hide()):($("#pager-prev").hide(),$("#pager-prev-disabled").show()),searchWorksJson.data.searchWorks.pageInfo.hasNextPage?($("#pager-next").show(),$("#pager-next-disabled").hide()):($("#pager-next").hide(),$("#pager-next-disabled").show())}function searchWorks(r,e){var a=$("#title").val(),s=getSearchWorksVariables(a,r,e);0!=s.titles.length&&postQuery(function(r){searchWorksJson=r,searchWorksJson.title=a,saveSearchWorksJson(),renderSearchWorks()},searchWorksQuery,s)}loadSearchWorksJson(),$(function(){$("#searchForm").submit(function(){return searchWorks(null,null),!1}),$("#works-template .work-status").change(function(){var r=$(this),e=r.val(),a=r.closest(".work-heading").data("id");postQuery(function(r){var a=r.data.updateStatus.work;("WATCHING"==e?addWatchingWorksJson(a):removeWatchingWorksJson(a.annictId))&&renderWatchingWorks()},updateStatusQuery,getStateVariables(a,e))}),$("#pager-prev a").click(function(){return searchWorks(searchWorksJson.data.searchWorks.pageInfo.startCursor,null),!1}),$("#pager-next a").click(function(){return searchWorks(null,searchWorksJson.data.searchWorks.pageInfo.endCursor),!1}),renderSearchWorks()});