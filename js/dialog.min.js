var dialogContent=new function(){var t=new StorageCache("twitter"),e=new StorageCache("facebook"),i=function(t,e){var i=e.get();t.prop("checked","true"==i)},o=function(t,e){var i=t.prop("checked");return e.set(i),i},n=function(){$('[name^="review-rating-"][value=""]').click(),$("#review-body").val("")},c=function(){$('[name="record-rating"][value=""]').click(),$("#record-comment").val("")},a=$.extend(function(t){this.id=t,this.dialog=null,this.callback=null}.prototype,{build:function(){this.dialog=$(this.id),this.dialog.find("button.btn-success").click(this.execute.bind(this))},display:function(){this.show()},execute:function(){this.hide()},show:function(){this.dialog.modal()},hide:function(){this.dialog.modal("hide")}}).constructor,r=new(Object.setPrototypeOf($.extend(function(t){a.call(this,t)}.prototype,{display:function(t){this.callback=t,this.show()},execute:function(){var t=$("#token").val(),e=$('[name="storage"]:checked').val();this.hide(),t?this.callback(e,t):headerContent.inform("アクセストークンを入力してください。","danger")}}),a.prototype).constructor)("#token-modal"),s=new(Object.setPrototypeOf($.extend(function(t){a.call(this,t),this.episodeId=null}.prototype,{display:function(o,n,a,r,s,d,h){this.callback=o,h!=this.episodeId&&(c(),this.episodeId=h),$("#record-work-link").attr("href",n).text(a),$("#record-episode-link").attr("href",r),$("#record-episode-number").text(s),$("#record-episode-title").text(d),i($("#record-twitter"),t),i($("#record-facebook"),e),this.show()},execute:function(){var i=$('[name="record-rating"]:checked').val(),n=$("#record-comment").val(),c=o($("#record-twitter"),t),a=o($("#record-facebook"),e);this.hide(),annict.createRecord(this.success.bind(this),this.episodeId,i,n,c,a)},success:function(t){this.callback(t),c(),headerContent.inform("記録しました。","info")}}),a.prototype).constructor)("#record-modal"),d=new(Object.setPrototypeOf($.extend(function(t){a.call(this,t),this.workId=null}.prototype,{display:function(o,c,a){a!=this.workId&&(n(),this.workId=a),$("#review-work-link").attr("href",o).text(c),i($("#review-twitter"),t),i($("#review-facebook"),e),this.show()},execute:function(){var i=$('[name="review-rating-overall"]:checked').val(),n=$('[name="review-rating-animation"]:checked').val(),c=$('[name="review-rating-music"]:checked').val(),a=$('[name="review-rating-story"]:checked').val(),r=$('[name="review-rating-character"]:checked').val(),s=$("#review-body").val(),d=o($("#review-twitter"),t),h=o($("#review-facebook"),e);this.hide(),annict.createReview(this.success,this.workId,s,i,n,c,a,r,d,h)},success:function(t){n(),headerContent.inform("記録しました。","info")}}),a.prototype).constructor)("#review-modal"),h=new(Object.setPrototypeOf($.extend(function(t){a.call(this,t),this.workId=null,this.state=null}.prototype,{display:function(t,e,i,o,n,c){this.callback=t,this.workId=c,this.state=e,$("#status-work-link").attr("href",o).text(n),$("#status-modal-name").text(i),$("#status-modal-ok").text(i),this.show()},execute:function(){this.hide(),annict.updateStatus(this.success.bind(this),this.workId,this.state)},success:function(t){this.callback(this.workId,this.state),headerContent.inform("変更しました。","info")}}),a.prototype).constructor)("#status-modal");this.inputTokenDialog=r,this.createRecordDialog=s,this.createReviewDialog=d,this.updateStatusDialog=h,this.build=function(){var t;r.build(),s.build(),d.build(),h.build(),t=$("#rating-template > *").clone(!1,!1),$(".rating").append(t).each(function(){var t=$(this).data("name");$(this).find("input").attr("name",t)})}};$(function(){dialogContent.build()});