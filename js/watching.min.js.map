{"version":3,"sources":["watching.js"],"names":["watchingContent","watchingWorksJsonCache","Object","setPrototypeOf","$","extend","key","JsonCache","call","this","prototype","save","json","get","data","viewer","works","nodes","sort","work1","work2","TitleNormalizer","compare","episodeAnnictIds","forEach","work","episodes","length","push","annictId","getDefault","version","constructor","template","createWorkHeading","href","annict","makeWorkPageUrl","workHeading","find","clone","removeData","attr","id","text","title","createEpisodeBody","episode","episodeBody","empty","makeEpisodePageUrl","record","numberText","viewerDidTrack","hide","groups","initial","reg","render","i","test","getKana","watchingWorks","group","show","headerContent","toggleInitial","groupContents","worksContents","filter","append","shift","updateBodyTop","updateEpisode","workContents","set","remove","after","updateWatchingWorksJson","callback","searchEpisodes","workAnnictId","removeWork","workId","splice","removeWatchingWorksJson","closest","next","groupBody","groupHeading","prev","setupEpisodeNextPrevEvent","target","method","episodeKey","skip","on","addBack","rootEpisode","searchEpisode","setupUpdateStatusEvent","state","name","workHref","workTitle","dialogContent","updateStatusDialog","display","searchContent","updateWorkStatus","setupEvent","createReviewDialog","episodeHref","episodeNumber","episodeTitle","episodeId","createRecordDialog","createRecord","setupEpisodeRecordEvent","prevEpisode","nextEpisode","inform","StorageCache","clear","addWork","addWatchingWorksJson","getGroups","getGroupTop","groupHeadingFirstTop","offset","top","build"],"mappings":"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"}