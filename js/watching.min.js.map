{"version":3,"sources":["watching.js"],"names":["watchingWorksJsonCache","Object","setPrototypeOf","$","extend","key","JsonCache","call","this","prototype","save","item","data","viewer","works","nodes","sort","work1","work2","TitleNormalizer","compare","episodeAnnictIds","forEach","work","episodes","length","push","annictId","getDefault","version","constructor","getWorkHeading","href","workHeading","clone","removeData","attr","id","find","text","title","getEpisodeBody","episode","episodeBody","empty","record","numberText","viewerDidTrack","hide","groupList","reg","renderWatchingWorks","get","i","test","getKana","watchingWorks","group","groupContents","worksContents","append","shift","updateEpisode","workContents","filter","remove","after","loadChecked","target","value","localStorage","getItem","prop","saveChecked","setItem","setupWorkReviewEvent","click","closest","workTitle","val","modal","overall","animation","music","story","character","body","twitter","facebook","api","createReview","json","alertMessage","setupEpisodeRecordEvent","prev","andSelf","episodeNumber","episodeTitle","rating","comment","createRecord","searchEpisode","rootEpisode","episodeKey","setupEpisodeNextPrevEvent","method","skip","searchEpisodes","setupUpdateStatusEvent","state","prefix","idPrefix","updateStatus","workAnnictId","removeWatchingWorksJson","next","groupBody","setupEvent","template","prevEpisode","nextEpisode","updateWatchingWorksJson","StorageCache","clear","searchWorksJsonCache","renderSearchWorks"],"mappings":"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"}