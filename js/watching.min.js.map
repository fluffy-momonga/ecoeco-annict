{"version":3,"sources":["watching.js"],"names":["watchingWorksJsonCache","Object","setPrototypeOf","$","extend","key","JsonCache","call","this","prototype","save","item","data","viewer","works","nodes","sort","work1","work2","TitleNormalizer","compare","episodeAnnictIds","forEach","work","episodes","length","push","annictId","getDefault","version","constructor","updateWatchingWorksJson","callback","api","watchingWorks","json","searchEpisodes","episode","workAnnictId","i","set","get","addWatchingWorksJson","removeWatchingWorksJson","splice","getWorkHeading","href","workHeading","clone","removeData","attr","id","find","text","title","getEpisodeBody","episodeBody","empty","record","numberText","viewerDidTrack","hide","groupList","reg","renderWatchingWorks","test","getKana","group","groupContents","worksContents","append","shift","updateEpisode","workContents","filter","remove","after","loadChecked","target","value","localStorage","getItem","prop","saveChecked","setItem","setupWorkReviewEvent","click","closest","workTitle","val","modal","overall","animation","music","story","character","body","twitter","facebook","createReview","alertMessage","setupEpisodeRecordEvent","prev","andSelf","episodeNumber","episodeTitle","rating","comment","createRecord","searchEpisode","rootEpisode","episodeKey","setupEpisodeNextPrevEvent","method","skip","setupUpdateStatusEvent","state","prefix","idPrefix","updateStatus","next","groupBody","setupEvent","template","prevEpisode","nextEpisode","StorageCache","clear","searchWorksJsonCache","renderSearchWorks"],"mappings":"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"}